function comment_submit(e,a){if(""===$("#comment-text").val()){var t=$("body").data("active-lang");"en"==t?swal("Hmm","Need to write a review, try again pls","error"):swal("Hmm","Vous devez écrire un commentaire, Veuillez réessayer","error")}else{var n=$('meta[name="csrf-token"]').attr("content"),o=new FormData;o.append("_token",n),o.append("video_id",a),o.append("text",$("#comment-text").val()),$.ajax({type:"POST",url:e,contentType:!1,processData:!1,data:o,dataType:"html",success:function(e){var a=JSON.parse(e);""===a.user.name?userName=a.user.email:userName=a.user.name,$("#comment-text").val(""),$("#comment-rate-modal").modal("hide"),$("#new-comment-section").prepend('<div class="comment"><div class="img-block"><img src="'+a.user.picture+'" alt=""></div><div class="comment-text-block"><div class="comment-name">'+userName+'</div><p class="comment-text">'+a.text+" just now</p></div></div>")},error:function(e){alert("error "+e)}})}}function movie_like(e){var a=$("#likes-count").text(),t=$("#dislikes-count").text(),n=new FormData;n.append("_token","{{csrf_token()}}"),n.append("id",e.data("video-id")),n.append("type","like"),$.ajax({type:"POST",url:e.data("route-like"),contentType:!1,processData:!1,data:n,dataType:"html",success:function(e){$("#likes-count, #likes-count-top").text(+a+1),$(".btn-like").removeClass("btn-off").addClass("btn-on"),$(".btn-dislike").removeClass(".btn-on").addClass("btn-off");var n=JSON.parse(e);1===n.check&&$("#dislikes-count").text(+t-1)},error:function(e){var a=$("body").data("active-lang");"en"==a?swal("Oh no!",'Problem "linking" your movie. Please try again later',"error"):swal("Oh non!",'Difficulté a "aimer" votre video. Veuillez réessayer plus tard',"error")}})}function movie_unlike(e){var a=$("#likes-count").text(),t=new FormData;t.append("_token","{{csrf_token()}}"),t.append("id",e.data("video-id")),$.ajax({type:"POST",url:e.data("route-unlike"),contentType:!1,processData:!1,data:t,dataType:"html",success:function(e){$("#likes-count, #likes-count-top").text(+a-1),$(".btn-like").removeClass("btn-on").addClass("btn-off");JSON.parse(e)},error:function(e){var a=$("body").data("active-lang");"en"==a?swal("Oh no!",'Problem "unlinking" your movie. Please try again later',"error"):swal("Oh non!",'Difficulté a annuler l\'action "aimer" sur votre video. Veuillez réessayer plus tard',"error")}})}function movie_dislike(e){var a=$("#likes-count").text(),t=$("#dislikes-count").text(),n=new FormData;n.append("_token","{{csrf_token()}}"),n.append("id",e.data("video-id")),n.append("type","dislike"),$.ajax({type:"POST",url:e.data("route-like"),contentType:!1,processData:!1,data:n,dataType:"html",success:function(e){$("#dislikes-count").text(+t+1),$(".btn-dislike").removeClass("btn-off").addClass("btn-on"),$(".btn-like").removeClass("btn-on").addClass("btn-off");var n=JSON.parse(e);1===n.check&&$("#likes-count, #likes-count-top").text(+a-1)},error:function(e){var a=$("body").data("active-lang");"en"==a?swal("Oh no!",'Problem "dislinking" your movie. Please try again later',"error"):swal("Oh non!",'Difficulté a "pas aimer" votre video. Veuillez réessayer plus tard',"error")}})}function movie_undislike(e){var a=$("#dislikes-count").text(),t=new FormData;t.append("_token","{{csrf_token()}}"),t.append("id",e.data("video-id")),$.ajax({type:"POST",url:e.data("route-unlike"),contentType:!1,processData:!1,data:t,dataType:"html",success:function(e){$("#dislikes-count").text(+a-1),$(".btn-dislike").removeClass("btn-on").addClass("btn-off");JSON.parse(e)},error:function(e){var a=$("body").data("active-lang");"en"==a?swal("Oh no!",'Couldn\'t "undislike" the movie. Please try again later',"error"):swal("Oh no!",'Problème enlever l\'action "pas aimer" sur le film. Veuillez réessayer plus tard',"error")}})}function sendContactForm(e){var a=new FormData;a.append("_token","{{csrf_token()}}"),a.append("category",$("#q-category").val()),a.append("email",$("#user-email").val()),a.append("message",$("#message-text").val()),$("#btn-submit-contact").prop("disabled",!0),$.ajax({type:"POST",url:e,contentType:!1,processData:!1,data:a,dataType:"html",success:function(e){var a=$("body").data("active-lang");"en"==a?swal("Cool!","Email sent successfully","success"):swal("Superbe!","L'email a été envoyé avec succès","success"),$("#btn-submit-contact").prop("disabled",!1)},error:function(e){var a=$("body").data("active-lang");"en"==a?swal("Oh no!","Email couldn't be sent. Please try again later","success"):swal("Oh non","L'email n'a pas pu être envoyé. Veuillez réessayer plus tard","success"),$("#btn-submit-contact").prop("disabled",!1)}})}function updateProfile(e){var a=new FormData;a.append("_token","{{csrf_token()}}"),a.append("name",$("#user-name").val()),a.append("email",$("#user-email").val()),a.append("phone",$("#user-phone").val()),$("#btn-update-profile").prop("disabled",!0),$.ajax({type:"POST",url:e,contentType:!1,processData:!1,data:a,dataType:"html",success:function(e){var a=$("body").data("active-lang");"en"==a?swal("Cool!","Profile was successfully updated","success"):swal("Superbe!","Votre profil a été mis à jour avec succès","success"),$("#btn-update-profile").prop("disabled",!1)},error:function(e){var a=$("body").data("active-lang");"en"==a?swal("Oh no!","Couldn't update your profile. Please try again later","error"):swal("Oh non!","Difficulté à mettre à jour votre profile. Veuillez réessayer plus tard","error"),$("#btn-update-profile").prop("disabled",!1)}})}function updatePassword(e){var a=new FormData;a.append("_token","{{csrf_token()}}"),a.append("oldpassword",$("#old-password").val()),a.append("newpassword",$("#new-password").val()),$("#btn-update-password").prop("disabled",!0),$.ajax({type:"POST",url:e,contentType:!1,processData:!1,data:a,dataType:"html",success:function(e){var a=JSON.parse(e),t=$("body").data("active-lang");"en"==t?swal(a.title,a.message,a.type):swal("Superbe!","Votre mot de passe a été mis à jour","error"),$("#btn-update-password").prop("disabled",!1)},error:function(e){var a=$("body").data("active-lang");"en"==a?swal("Oh no!","Couldn't update your password. Please try again later","error"):swal("Oh non!","Difficulté à mettre à jour votre mot de passe. Veuillez réessayer plus tard","error"),$("#btn-update-password").prop("disabled",!1)}})}$('a[href*="#"]').not('[href="#"]').not('[href="#0"]').not('[data-toggle="collapse"]').click(function(e){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var a=$(this.hash);a=a.length?a:$("[name="+this.hash.slice(1)+"]"),a.length&&(e.preventDefault(),$("html, body").animate({scrollTop:a.offset().top},1e3,function(){var e=$(a);return e.focus(),!e.is(":focus")&&(e.attr("tabindex","-1"),void e.focus())}))}}),function(){"use strict";function e(){function e(e,a,t,n){var o=n[1],s=n[0],r=o[t.matchPassword],i=function(){return r.$viewValue};e.$watch(i,function(){s.$$parseAndValidate()}),s.$validators?s.$validators.passwordMatch=function(e){return!e&&!r.$modelValue||e===r.$modelValue}:s.$parsers.push(function(e){return s.$setValidity("passwordMatch",!e&&!r.$viewValue||e===r.$viewValue),e}),r.$parsers.push(function(e){return s.$setValidity("passwordMatch",!e&&!s.$viewValue||e===s.$viewValue),e})}var a=["^ngModel","^form"];return{restrict:"A",require:a,link:e}}angular.module("ngPassword",[]).directive("matchPassword",e),angular.module("angular.password",["ngPassword"]),angular.module("angular-password",["ngPassword"]),"object"==typeof module&&"function"!=typeof define&&(module.exports=angular.module("ngPassword"))}(),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$("body").on("click","#btn-submit-comment",function(){comment_submit($(this).data("comment-route"),$(this).data("video-id"))}),$("body").on("click","#btn-submit-contact",function(){sendContactForm($(this).data("contact-route"))}),$("body").on("click","#btn-update-profile",function(){updateProfile($(this).data("update-profile"))}),$("body").on("click","#btn-update-password",function(){updatePassword($(this).data("update-password"))}),$("body").on("click",".btn-like",function(){$(this).hasClass("btn-on")?movie_unlike($(this)):movie_like($(this))}),$("body").on("click",".btn-dislike",function(){$(this).hasClass("btn-on")?movie_undislike($(this)):movie_dislike($(this))});var substringMatcher=function(e){return function(a,t){var n;n=[],substrRegex=new RegExp(a,"i"),$.each(e,function(e,a){substrRegex.test(a)&&n.push(a)}),t(n)}},states=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,prefetch:"/search-data"});$("#frame-search .typeahead").typeahead({hint:!0,highlight:!0,minLength:1},{name:"states",source:states}),$("body").on("click","#link-update-package",function(){document.location.href=$(this).data("route")});var ukumbitvApp=angular.module("ukumbitvApp",[]);ukumbitvApp.factory("servMovies",function(){var e=[{}];return e}),ukumbitvApp.controller("InstantSearchController",["$scope","servMovies",function(e,a){}]);var validationApp=angular.module("validationApp",["ngPassword"]);validationApp.controller("mainController",["$scope",function(e){e.submitForm=function(){}}]),function(){var e=document.getElementById("morphsearch");if(null!==e){var a=e.querySelector("input.morphsearch-input"),t=e.querySelector("span.morphsearch-close"),n=isAnimating=!1,o=function(t){if("focus"===t.type.toLowerCase()&&n)return!1;morphsearch.getBoundingClientRect();n?(classie.remove(e,"open"),""!==a.value&&setTimeout(function(){classie.add(e,"hideInput"),setTimeout(function(){classie.remove(e,"hideInput"),a.value=""},300)},500),a.blur()):classie.add(e,"open"),n=!n};a.addEventListener("focus",o),t.addEventListener("click",o),document.addEventListener("keydown",function(e){var a=e.keyCode||e.which;27===a&&n&&o(e)}),e.querySelector('button[type="submit"]').addEventListener("click",function(e){e.preventDefault()})}}();